<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>5x5 Terra K Logo - PNG Export</title>
  <style>
    /*
      Simple HTML/CSS/JS logo generator
      - 5x5 grid with selective corner rounding for clean geometry
      - Terra cotta K shape with lightening tints
      - Other cells use charcoal (near-black) for a modern tech vibe
      - Corner cells use SVG paths for precise selective rounding
      - Export to PNG with transparent background
    */

    :root {
      /* Adjust overall preview size (pixels on screen only) */
      --preview-size: 520;
      /* Outer corner radius of the big square (pixels, on the SVG coordinate space) */
      --outer-radius: 80;
      /* Spacing between small squares inside the grid (SVG units) */
      --gap: 6;
      /* Inner padding from outer rounded edge to the grid (SVG units) */
      --pad: 34;

      /* Colors */
      --terra-base: #E07A5F;      /* terra cotta base */
      --terra-l1:   #EAA189;      /* slightly lighter */
      --terra-l2:   #F1B9A9;      /* lighter */
      --terra-l3:   #F7D6CC;      /* lightest */
      --charcoal:   #353535;      /* near-black for modern tech vibe */
    }

    body {
      margin: 0; padding: 24px; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color: #111;
      background: #f7f7f7;
    }

    h1 { font-size: 20px; margin: 0 0 8px; }
    p  { margin: 0 0 12px; color: #333; }

    .wrap {
      display: grid; grid-template-columns: auto 1fr; gap: 24px; align-items: start;
    }

    .controls {
      background: white; border: 1px solid #e6e6e6; border-radius: 12px; padding: 16px; box-shadow: 0 1px 2px rgba(0,0,0,0.05);
      width: 320px;
    }

    .controls label { display: block; font-size: 13px; color: #444; margin-top: 8px; }
    .controls input[type="number"] { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 8px; margin-top: 6px; }
    .controls button { margin-top: 12px; padding: 10px 12px; border: 0; border-radius: 10px; background: #111; color: white; cursor: pointer; }
    .controls button:active { transform: translateY(1px); }

    .preview {
      /* Checkerboard to show transparent areas of the export */
      width: calc(var(--preview-size) * 1px);
      height: calc(var(--preview-size) * 1px);
      background:
        linear-gradient(45deg, #e5e5e5 25%, transparent 25%),
        linear-gradient(-45deg, #e5e5e5 25%, transparent 25%),
        linear-gradient(45deg, transparent 75%, #e5e5e5 75%),
        linear-gradient(-45deg, transparent 75%, #e5e5e5 75%);
      background-size: 24px 24px;
      background-position: 0 0, 0 12px, 12px -12px, -12px 0px;
      border-radius: 12px; border: 1px solid #e6e6e6; display: grid; place-items: center;
    }

    /* These classes are applied to SVG cells (rect for interior, path for corners). */
    .cell { shape-rendering: crispEdges; }
    .fill-terra       { fill: var(--terra-base); }
    .fill-terra-l1    { fill: var(--terra-l1); }
    .fill-terra-l2    { fill: var(--terra-l2); }
    .fill-terra-l3    { fill: var(--terra-l3); }
    .fill-charcoal    { fill: var(--charcoal); }
    
    /* Corner path elements for selective rounding */
    .corner-tl, .corner-tr, .corner-bl, .corner-br { shape-rendering: crispEdges; }
  </style>
</head>
<body>
  <h1>5x5 Terra K Logo</h1>
  <p>Preview below. Download as PNG with transparent background.</p>

  <div class="wrap">
    <section class="controls">
      <label for="exportSize">PNG export size in pixels</label>
      <input id="exportSize" type="number" min="256" step="64" value="1024" />

      <label for="fileName">File name</label>
      <input id="fileName" type="text" value="terra-k-logo.png" />

      <button id="downloadBtn">Download PNG</button>

      <details style="margin-top: 10px;">
        <summary>How it is colored</summary>
        <ul style="margin: 8px 0 0 18px; padding: 0; line-height: 1.4;">
          <li>Left column c1r1 to c1r5 uses terra cotta base.</li>
          <li>Pivot at c2r3 is lighter.</li>
          <li>Arms toward top-right and bottom-right get lighter as they extend: c3r2 and c3r4 then c4r1 and c4r5.</li>
          <li>All other cells use charcoal for a modern tech vibe.</li>
        </ul>
      </details>
    </section>

    <section class="preview">
      <!-- SVG is generated by JS with selective corner rounding for clean geometry -->
      <svg id="logoSvg" width="480" height="480" viewBox="0 0 480 480" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Terra K 5x5 logo">
        <!-- Cells with individual corner rounding for precise geometry -->
        <g id="cells"></g>
      </svg>
    </section>
  </div>

  <!--
    CLASS MAP AND INTENT - read this to understand what each cell is doing

    Coordinates are 1-indexed: column 1..5 left to right, row 1..5 top to bottom.

    K structure
    - Left vertical bar: c1r1, c1r2, c1r3, c1r4, c1r5  -> classes: cell c1 rX k-left fill-terra
    - Pivot (center):   c2r3                          -> classes: cell c2 r3 k-pivot fill-terra-l1
    - Upper arm:        c3r2 (near pivot), c4r1 (far) -> classes: c3 r2 k-arm-up fill-terra-l2; c4 r1 k-end-up fill-terra-l3
    - Lower arm:        c3r4 (near pivot), c4r5 (far) -> classes: c3 r4 k-arm-down fill-terra-l2; c4 r5 k-end-down fill-terra-l3

    All other cells: charcoal -> classes: cell cN rM fill-charcoal

    Corner cells (c1r1, c5r1, c1r5, c5r5) are created as <path> elements with selective rounding.
    Interior cells are created as <rect> elements for crisp edges.
    All elements use the class names above for consistent styling.
  -->

  <script>
    // Grid and geometry settings in SVG units
    const SIZE = 480;                  // Total SVG size
    const PAD  = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--pad')) || 34;
    const GAP  = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--gap')) || 14;
    const N    = 5;                    // 5x5 grid

    // Compute cell size so that 5 cells and 4 gaps fit within the padded area
    const inner = SIZE - 2 * PAD;      // area inside padding
    const cell  = (inner - GAP * (N - 1)) / N;

    // Color classes used for fills
    const FILL = {
      base: 'fill-terra',
      l1:   'fill-terra-l1',
      l2:   'fill-terra-l2',
      l3:   'fill-terra-l3',
      dark: 'fill-charcoal'
    };

    // Helper to decide which cells form the K shape
    function kFillFor(col, row) {
      // Left column is base terra cotta
      if (col === 1) return { cls: [FILL.base, 'k-left'], title: 'K left bar' };

      // Pivot at c2r3 is lighter
      if (col === 2 && row === 3) return { cls: [FILL.l1, 'k-pivot'], title: 'K pivot' };

      // Upper arm near and far
      if (col === 3 && row === 2) return { cls: [FILL.l2, 'k-arm-up'], title: 'K upper arm' };
      if (col === 4 && row === 1) return { cls: [FILL.l3, 'k-end-up'], title: 'K upper endpoint' };

      // Lower arm near and far
      if (col === 3 && row === 4) return { cls: [FILL.l2, 'k-arm-down'], title: 'K lower arm' };
      if (col === 4 && row === 5) return { cls: [FILL.l3, 'k-end-down'], title: 'K lower endpoint' };

      // Everything else is charcoal
      return { cls: [FILL.dark], title: 'Background cell' };
    }

    // Helper function to create path for corner cells with selective rounding
    function createCornerPath(x, y, width, height, corner) {
      const radius = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--outer-radius')) || 80;
      const r = Math.min(radius, width / 2, height / 2); // Ensure radius doesn't exceed cell size
      
      let path = '';
      
      switch (corner) {
        case 'tl': // Top-left corner rounded only
          path = `M ${x + r} ${y} 
                  L ${x + width} ${y} 
                  L ${x + width} ${y + height} 
                  L ${x} ${y + height} 
                  L ${x} ${y + r} 
                  A ${r} ${r} 0 0 1 ${x + r} ${y} Z`;
          break;
        case 'tr': // Top-right corner rounded only  
          path = `M ${x} ${y} 
                  L ${x + width - r} ${y} 
                  A ${r} ${r} 0 0 1 ${x + width} ${y + r} 
                  L ${x + width} ${y + height} 
                  L ${x} ${y + height} Z`;
          break;
        case 'bl': // Bottom-left corner rounded only
          path = `M ${x} ${y} 
                  L ${x + width} ${y} 
                  L ${x + width} ${y + height} 
                  L ${x + r} ${y + height} 
                  A ${r} ${r} 0 0 1 ${x} ${y + height - r} Z`;
          break;
        case 'br': // Bottom-right corner rounded only
          path = `M ${x} ${y} 
                  L ${x + width} ${y} 
                  L ${x + width} ${y + height - r} 
                  A ${r} ${r} 0 0 1 ${x + width - r} ${y + height} 
                  L ${x} ${y + height} Z`;
          break;
      }
      
      return path;
    }

    // Create all 25 cells as <rect> or <path> elements for corners
    const g = document.getElementById('cells');

    for (let r = 1; r <= N; r++) {
      for (let c = 1; c <= N; c++) {
        const x = PAD + (c - 1) * (cell + GAP);
        const y = PAD + (r - 1) * (cell + GAP);

        const { cls, title } = kFillFor(c, r);
        
        // Determine if this is a corner cell and which corner
        let cornerType = null;
        if (c === 1 && r === 1) cornerType = 'tl';      // Top-left
        else if (c === N && r === 1) cornerType = 'tr'; // Top-right  
        else if (c === 1 && r === N) cornerType = 'bl'; // Bottom-left
        else if (c === N && r === N) cornerType = 'br'; // Bottom-right

        let element;
        
        if (cornerType) {
          // Create path element for corner cells with selective rounding
          element = document.createElementNS('http://www.w3.org/2000/svg', 'path');
          element.setAttribute('d', createCornerPath(x, y, cell, cell, cornerType));
          element.setAttribute('class', ['cell', `c${c}`, `r${r}`, `corner-${cornerType}`, ...cls].join(' '));
        } else {
          // Create regular rect element for non-corner cells
          element = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
          element.setAttribute('x', x);
          element.setAttribute('y', y);
          element.setAttribute('width', cell);
          element.setAttribute('height', cell);
          element.setAttribute('class', ['cell', `c${c}`, `r${r}`, ...cls].join(' '));
          element.setAttribute('rx', 0);
        }

        // Tooltip for quick reference in the browser
        const t = document.createElementNS('http://www.w3.org/2000/svg', 'title');
        t.textContent = `col ${c}, row ${r} - ${title}${cornerType ? ` (${cornerType} corner)` : ''}`;
        element.appendChild(t);

        // Keep handy readable metadata
        element.dataset.col = c;
        element.dataset.row = r;
        element.dataset.role = title;

        g.appendChild(element);
      }
    }

    // Export to PNG at a chosen pixel size with transparency preserved
    const btn = document.getElementById('downloadBtn');
    const svg = document.getElementById('logoSvg');

    btn.addEventListener('click', async () => {
      const exportSize = Math.max(256, parseInt(document.getElementById('exportSize').value || '1024', 10));
      const fileName = (document.getElementById('fileName').value || 'terra-k-logo.png').trim();

      // Serialize the current SVG
      const clone = svg.cloneNode(true);
      clone.setAttribute('width', exportSize);
      clone.setAttribute('height', exportSize);
      clone.setAttribute('viewBox', `0 0 ${SIZE} ${SIZE}`);
      clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');

      // Inline CSS for fills so the exported image has the exact colors
      const style = document.createElementNS('http://www.w3.org/2000/svg', 'style');
      style.textContent = `
        .cell { shape-rendering: crispEdges; }
        .fill-terra { fill: var(--terra-base); }
        .fill-terra-l1 { fill: var(--terra-l1); }
        .fill-terra-l2 { fill: var(--terra-l2); }
        .fill-terra-l3 { fill: var(--terra-l3); }
        .fill-charcoal { fill: var(--charcoal); }
        :root { --terra-base: ${getComputedStyle(document.documentElement).getPropertyValue('--terra-base').trim()};
                --terra-l1: ${getComputedStyle(document.documentElement).getPropertyValue('--terra-l1').trim()};
                --terra-l2: ${getComputedStyle(document.documentElement).getPropertyValue('--terra-l2').trim()};
                --terra-l3: ${getComputedStyle(document.documentElement).getPropertyValue('--terra-l3').trim()};
                --charcoal: ${getComputedStyle(document.documentElement).getPropertyValue('--charcoal').trim()}; }
      `;
      clone.insertBefore(style, clone.firstChild);

      const svgData = new XMLSerializer().serializeToString(clone);
      const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
      const url = URL.createObjectURL(svgBlob);

      const img = new Image();
      // Important for drawing SVG with external CSS variables to canvas
      img.decoding = 'sync';
      img.onload = () => {
        const canvas = document.createElement('canvas');
        canvas.width = exportSize; canvas.height = exportSize;
        const ctx = canvas.getContext('2d');
        ctx.clearRect(0, 0, exportSize, exportSize); // keep transparent background
        ctx.drawImage(img, 0, 0, exportSize, exportSize);
        URL.revokeObjectURL(url);

        canvas.toBlob((blob) => {
          const a = document.createElement('a');
          a.href = URL.createObjectURL(blob);
          a.download = fileName;
          document.body.appendChild(a);
          a.click();
          a.remove();
        }, 'image/png');
      };
      img.src = url;
    });
  </script>
</body>
</html>
